# JVM——interview

## 内存模型

<img src="https://i.loli.net/2021/01/26/erhscWXJFjVGpmO.png" alt="未命名文件 (1)" style="zoom: 50%;" />

### 线程共享

- 方法区
- 堆

### 非线程共享

- 虚拟机栈
- 程序计数器

## OOM

- 堆溢出

- 虚拟机栈和本地方法栈溢出

- 方法区

- 运行时常量池溢出

    

## 判断内存已死

- 计数算法
- 可达性算法

## 引用

- 强引用
- 软引用
- 弱引用
- 虚引用

## 回收自救

- finalize

## 垃圾收集算法

### 分代理论三个假说

- 弱分代假说：绝大多数对象都是朝生夕灭的
- 强分代假说：熬过越多次垃圾回收的对象越难被回收              
- 跨代引用假说：跨代引用仅占同代引用的极少部分

### 垃圾收集算法

- 标记——清除算法
- 标记——赋值算法
- 标记——整理算法

### 经典垃圾收集器

- CMS
    - 获取最短回收停顿时间为目标的收集器
    - 并发收集、低停顿
- G1
    - 化整为0的思路，没有新生代和老年代之分
    - 不追求一次将全部垃圾回收，计算回收效益最佳的区域回收垃圾

## GC Roots

- 方法区常量引用的对象
- 方法区静态变量引用的对象
- 虚拟机栈中的引用的对象

