#  协议通信——interview

## Cookie和Session的区别

HTTP是无状态协议, 不能用状态来区分、管理请求和响应, 所以服务器单单从网络连接上无法知道客户的身份

Cookie是客户端保存用户信息的一种机制, 用来记录用户的一些信息. Cookie是服务器在本地机器上存储的一段文本, 并随着每次请求发送到服务器

服务器在执行Session机制时, 会生成Session的id值, 这个id值会发送给客户端, 并保存在客户端上, 保存的容器就是Cookie.

### 比较

- Cookie数据存放在客户端上, Session数据存放在服务器上.
- 服务器的Session机制依赖于客户端的Cookie.
- Cookie不是很安全, 通过分析存放在本地的Cookie并进行Cookie欺骗, 考虑到安全应该使用Session
- Session会在一定时间内保存在服务器上, 当访问增加时, 会占用服务器的性能, 考虑减轻服务器的性能时, 可以考虑用Cookie.
- 单个Cookie保存的数据不能超过4K, 很多浏览器都限制一个站点最多保存20个Cookie
- 实际应用中, 可以考虑将登录信息等重要信息存放到Session中, 而其他信息如果需要保留可以存放在Cookie中

## token

Token是服务端生成的一串字符串，以作客户端进行请求的一个令牌，当第一次登录后，服务器生成一个Token便将此Token返回给客户端，以后客户端只需带上这个Token前来请求数据即可，无需再次带上用户名和密码

### token身份验证

客户端使用用户名跟密码请求登录

服务端收到请求，去验证用户名与密码

验证成功后，服务端会签发一个 Token，再把这个 Token 发送给客户端

客户端收到 Token 以后可以把它存储起来，比如放在 Cookie 里或者 Local Storage 里

客户端每次向服务端请求资源的时候需要带着服务端签发的 Token

服务端收到请求，然后去验证客户端请求里面带着的 Token，如果验证成功，就向客户端返回请求的数据

### 网址到获得页面过程

DNS解析获取IP地址

三次握手建立tcp连接

客户端发送http请求

服务器处理请求

服务器响应请求

浏览器展示

### http状态码

200：请求成功

301：地址重定向（永久）

302：地址重定向（暂时）

404：请求资源不存在

500：服务器内部错误

### http缓存有哪些

Cookie

Session

`Localstorage`html5的一种新的本地缓存方案，目前用的比较多，一般用来存储ajax返回的数据，加快下次页面打开时的渲染速度

`Sessionstorage`和localstorage类似，但是浏览器关闭则会全部删除，api和localstorage相同，实际项目中使用较少