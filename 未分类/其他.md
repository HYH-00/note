## 其他

### 虚拟内存

虚拟内存提供了三个重要的能力： **缓存**，**内存管理**，**内存保护**



没有虚拟内存概念的时候，程序寻址用的都是物理地址。程序能寻址的范围是有限的，这取决于CPU的地址线条数。比如在32位平台下，寻址的范围是2^32也就是4G。并且这是固定的，如果没有虚拟内存，且每次开启一个进程都给4G的物理

当多个进程需要同时运行的时候，就会出现需要多个4G内存的情况，如果不够，则进程需要等待



1. 它将主存看成是一个存储在磁盘上的地址空间的高速缓存，在主存中只保存活动区域，并根据需要在磁盘和主存之间来回传送数据，通过这种方式，高效的使用了主存。
2. 它为每个进程提供了一致的地址空间，从而简化了内存管理
3. 它保护了每个进程的地址空间不被其他进程破坏。



应用虚拟内存机制有很多优点：

1.当不同的进程使用同样的代码时，比如库文件中的代码，物理内存中可以只存储一份这样的代码，不同的进程只需要把自己的虚拟内存映射过去就可以了，节省内存

2.在程序需要分配连续的内存空间的时候，只需要在虚拟内存空间分配连续空间，而不需要实际物理内存的连续空间，可以利用碎片



现代计算机里的存储器类型分别有：寄存器、高速缓存、主存（物理内存）和磁盘，这些存储器的速度逐级递减而容量逐级递增

### 缓存

#### 常见缓存：

- FIFO
- LRU
- LFU
- 2Q：FIFO+LRU

#### 缓存一致性问题

解决方案

- 实时同步
- 发送mq
- 定时拉取数据更新
- binlog订阅



- 先删缓存再更新数据库
- 延时双删（避免数据库没更新完成，其他线程将旧数据写入缓存）
- 消息队列

